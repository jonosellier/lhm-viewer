import{w as G,x as J,y as M,z as K,s as Q,e as _,a as w,c as f,b as g,l as L,g as E,f as p,m as b,i as S,h as i,n as y,k as X,v as Z,A as ee,t as A,d as N,q as te,j as q}from"../chunks/scheduler.DNAvik3t.js";import{g as le,b as ae,e as se,t as re,S as ne,i as ce}from"../chunks/index.CWoPOsBs.js";import{e as z}from"../chunks/each.-gASlQSi.js";import{g as oe}from"../chunks/entry.B4dGGw_9.js";import{b as H}from"../chunks/paths.4KVREPtI.js";import{e as I,u as ue,f as de}from"../chunks/db.CvWChQ2q.js";import{d as he}from"../chunks/dialog.service.CZDUX4Td.js";function V(a,e){const n=e.token={};function l(r,c,o,t){if(e.token!==n)return;e.resolved=t;let u=e.ctx;o!==void 0&&(u=u.slice(),u[o]=t);const s=r&&(e.current=r)(u);let d=!1;e.block&&(e.blocks?e.blocks.forEach((h,v)=>{v!==c&&h&&(le(),ae(h,1,1,()=>{e.blocks[v]===h&&(e.blocks[v]=null)}),se())}):e.block.d(1),s.c(),re(s,1),s.m(e.mount(),e.anchor),d=!0),e.block=s,e.blocks&&(e.blocks[c]=s),d&&K()}if(G(a)){const r=J();if(a.then(c=>{M(r),l(e.then,1,e.value,c),M(null)},c=>{if(M(r),l(e.catch,2,e.error,c),M(null),!e.hasCatch)throw c}),e.current!==e.pending)return l(e.pending,0),!0}else{if(e.current!==e.then)return l(e.then,1,e.value,a),!0;e.resolved=a}}function ie(a,e,n){const l=e.slice(),{resolved:r}=a;a.current===a.then&&(l[a.value]=r),a.current===a.catch&&(l[a.error]=r),a.block.p(l,n)}function P(a,e,n){const l=a.slice();return l[5]=e[n],l}function pe(a){return{c:y,l:y,m:y,p:y,d:y}}function _e(a){let e,n,l=`<td class="px-6 py-4" colspan="3"><a href="${`${H}/upload`}" class="btn btn-default">Upload new chart</a></td>`,r=z(a[4]),c=[];for(let t=0;t<r.length;t+=1)c[t]=Y(P(a,r,t));let o=null;return r.length||(o=W()),{c(){for(let t=0;t<c.length;t+=1)c[t].c();o&&o.c(),e=w(),n=_("tr"),n.innerHTML=l},l(t){for(let u=0;u<c.length;u+=1)c[u].l(t);o&&o.l(t),e=E(t),n=f(t,"TR",{"data-svelte-h":!0}),L(n)!=="svelte-pg92kb"&&(n.innerHTML=l)},m(t,u){for(let s=0;s<c.length;s+=1)c[s]&&c[s].m(t,u);o&&o.m(t,u),S(t,e,u),S(t,n,u)},p(t,u){if(u&3){r=z(t[4]);let s;for(s=0;s<r.length;s+=1){const d=P(t,r,s);c[s]?c[s].p(d,u):(c[s]=Y(d),c[s].c(),c[s].m(e.parentNode,e))}for(;s<c.length;s+=1)c[s].d(1);c.length=r.length,!r.length&&o?o.p(t,u):r.length?o&&(o.d(1),o=null):(o=W(),o.c(),o.m(e.parentNode,e))}},d(t){t&&(p(e),p(n)),ee(c,t),o&&o.d(t)}}}function W(a){let e,n='<td class="px-6 py-4" colspan="3">No charts</td>';return{c(){e=_("tr"),e.innerHTML=n},l(l){e=f(l,"TR",{"data-svelte-h":!0}),L(e)!=="svelte-1ihkd15"&&(e.innerHTML=n)},m(l,r){S(l,e,r)},p:y,d(l){l&&p(e)}}}function Y(a){let e,n,l=a[5].display_name+"",r,c,o,t=new Date(a[5].created_at).toLocaleString("en-US",{dateStyle:"short",timeStyle:"short"}).replace(", "," at ")+"",u,s,d,h,v,k,C,x,O="Delete",$,R;function F(){return a[2](a[5])}return{c(){e=_("tr"),n=_("td"),r=A(l),c=w(),o=_("td"),u=A(t),s=w(),d=_("td"),h=_("a"),v=A("Open"),C=w(),x=_("button"),x.textContent=O,this.h()},l(T){e=f(T,"TR",{class:!0});var m=g(e);n=f(m,"TD",{class:!0});var U=g(n);r=N(U,l),U.forEach(p),c=E(m),o=f(m,"TD",{class:!0});var B=g(o);u=N(B,t),B.forEach(p),s=E(m),d=f(m,"TD",{class:!0});var D=g(d);h=f(D,"A",{class:!0,href:!0});var j=g(h);v=N(j,"Open"),j.forEach(p),C=E(D),x=f(D,"BUTTON",{class:!0,"data-svelte-h":!0}),L(x)!=="svelte-1ypyy7z"&&(x.textContent=O),D.forEach(p),m.forEach(p),this.h()},h(){b(n,"class","px-6 py-4"),b(o,"class","px-6 py-4"),b(h,"class","btn btn-default"),b(h,"href",k=`${H}/${a[5].id}`),b(x,"class","btn btn-default"),b(d,"class","px-6 py-4"),b(e,"class","border border-slate-500")},m(T,m){S(T,e,m),i(e,n),i(n,r),i(e,c),i(e,o),i(o,u),i(e,s),i(e,d),i(d,h),i(h,v),i(d,C),i(d,x),$||(R=te(x,"click",F),$=!0)},p(T,m){a=T,m&1&&l!==(l=a[5].display_name+"")&&q(r,l),m&1&&t!==(t=new Date(a[5].created_at).toLocaleString("en-US",{dateStyle:"short",timeStyle:"short"}).replace(", "," at ")+"")&&q(u,t),m&1&&k!==(k=`${H}/${a[5].id}`)&&b(h,"href",k)},d(T){T&&p(e),$=!1,R()}}}function fe(a){let e,n='<td class="px-6 py-4" colspan="3">Loading...</td>';return{c(){e=_("tr"),e.innerHTML=n},l(l){e=f(l,"TR",{"data-svelte-h":!0}),L(e)!=="svelte-rkluvh"&&(e.innerHTML=n)},m(l,r){S(l,e,r)},p:y,d(l){l&&p(e)}}}function me(a){let e,n,l,r,c='<tr class="border border-slate-500"><th scope="col" class="px-6 py-3">Name</th> <th scope="col" class="px-6 py-3">Created At</th> <th scope="col" class="px-6 py-3"></th></tr>',o,t,u,s={ctx:a,current:null,token:null,hasCatch:!1,pending:fe,then:_e,catch:pe,value:4};return V(u=a[0],s),{c(){e=_("div"),n=_("div"),l=_("table"),r=_("thead"),r.innerHTML=c,o=w(),t=_("tbody"),s.block.c(),this.h()},l(d){e=f(d,"DIV",{class:!0});var h=g(e);n=f(h,"DIV",{class:!0});var v=g(n);l=f(v,"TABLE",{class:!0});var k=g(l);r=f(k,"THEAD",{class:!0,"data-svelte-h":!0}),L(r)!=="svelte-1ua396j"&&(r.innerHTML=c),o=E(k),t=f(k,"TBODY",{});var C=g(t);s.block.l(C),C.forEach(p),k.forEach(p),v.forEach(p),h.forEach(p),this.h()},h(){b(r,"class","text-xs text-slate-300 uppercase bg-slate-700"),b(l,"class","text-sm text-left"),b(n,"class","mx-auto relative overflow-x-auto border border-slate-500 rounded-lg w-max"),b(e,"class","py-6 w-full")},m(d,h){S(d,e,h),i(e,n),i(n,l),i(l,r),i(l,o),i(l,t),s.block.m(t,s.anchor=null),s.mount=()=>t,s.anchor=null},p(d,[h]){a=d,s.ctx=a,h&1&&u!==(u=a[0])&&V(u,s)||ie(s,a,h)},i:y,o:y,d(d){d&&p(e),s.block.d(),s.token=null,s=null}}}function be(a,e,n){let l;X(a,ue,t=>n(3,l=t));let r=I();Z(()=>{l||oe(H+"/")});async function c(t){await he.confirm("Are you sure you want to delete this chart? This cannot be undone")&&(await de(t),n(0,r=I()))}return[r,c,t=>c(t.id)]}class Se extends ne{constructor(e){super(),ce(this,e,be,me,Q,{})}}export{Se as component};
