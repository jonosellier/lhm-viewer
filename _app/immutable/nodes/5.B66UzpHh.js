import{w as K,x as Q,y as H,z as X,s as Z,e as _,a as E,c as m,b as y,l as D,g as L,f,m as g,i as S,h,q,n as x,r as ee,k as te,v as le,A as ae,t as N,d as O,p as se,j as z}from"../chunks/scheduler.D0mmhpNY.js";import{g as re,b as ne,e as ce,t as oe,S as ue,i as de}from"../chunks/index.DTMTwjKP.js";import{e as I}from"../chunks/each.-gASlQSi.js";import{g as ie}from"../chunks/entry.Dn6eCFfB.js";import{b as A}from"../chunks/paths.Bv69C8gR.js";import{e as V,u as he,f as pe}from"../chunks/db.HA4m_O5m.js";import{d as fe}from"../chunks/dialog.service.D09qy9jV.js";import{a as P}from"../chunks/index.CV9K13ux.js";function W(a,e){const r=e.token={};function l(s,n,c,t){if(e.token!==r)return;e.resolved=t;let u=e.ctx;c!==void 0&&(u=u.slice(),u[c]=t);const o=s&&(e.current=s)(u);let i=!1;e.block&&(e.blocks?e.blocks.forEach((d,p)=>{p!==n&&d&&(re(),ne(d,1,1,()=>{e.blocks[p]===d&&(e.blocks[p]=null)}),ce())}):e.block.d(1),o.c(),oe(o,1),o.m(e.mount(),e.anchor),i=!0),e.block=o,e.blocks&&(e.blocks[n]=o),i&&X()}if(K(a)){const s=Q();if(a.then(n=>{H(s),l(e.then,1,e.value,n),H(null)},n=>{if(H(s),l(e.catch,2,e.error,n),H(null),!e.hasCatch)throw n}),e.current!==e.pending)return l(e.pending,0),!0}else{if(e.current!==e.then)return l(e.then,1,e.value,a),!0;e.resolved=a}}function _e(a,e,r){const l=e.slice(),{resolved:s}=a;a.current===a.then&&(l[a.value]=s),a.current===a.catch&&(l[a.error]=s),a.block.p(l,r)}function Y(a,e,r){const l=a.slice();return l[5]=e[r],l}function me(a){return{c:x,l:x,m:x,p:x,d:x}}function be(a){let e,r,l=`<td class="px-6 py-4" colspan="3"><a href="${`${A}/upload`}" class="btn btn-default">Upload new chart</a></td>`,s=I(a[4]),n=[];for(let t=0;t<s.length;t+=1)n[t]=G(Y(a,s,t));let c=null;return s.length||(c=F()),{c(){for(let t=0;t<n.length;t+=1)n[t].c();c&&c.c(),e=E(),r=_("tr"),r.innerHTML=l},l(t){for(let u=0;u<n.length;u+=1)n[u].l(t);c&&c.l(t),e=L(t),r=m(t,"TR",{"data-svelte-h":!0}),D(r)!=="svelte-pg92kb"&&(r.innerHTML=l)},m(t,u){for(let o=0;o<n.length;o+=1)n[o]&&n[o].m(t,u);c&&c.m(t,u),S(t,e,u),S(t,r,u)},p(t,u){if(u&3){s=I(t[4]);let o;for(o=0;o<s.length;o+=1){const i=Y(t,s,o);n[o]?n[o].p(i,u):(n[o]=G(i),n[o].c(),n[o].m(e.parentNode,e))}for(;o<n.length;o+=1)n[o].d(1);n.length=s.length,!s.length&&c?c.p(t,u):s.length?c&&(c.d(1),c=null):(c=F(),c.c(),c.m(e.parentNode,e))}},d(t){t&&(f(e),f(r)),ae(n,t),c&&c.d(t)}}}function F(a){let e,r='<td class="px-6 py-4" colspan="3">No charts</td>';return{c(){e=_("tr"),e.innerHTML=r},l(l){e=m(l,"TR",{"data-svelte-h":!0}),D(e)!=="svelte-1ihkd15"&&(e.innerHTML=r)},m(l,s){S(l,e,s)},p:x,d(l){l&&f(e)}}}function G(a){let e,r,l=a[5].display_name+"",s,n,c,t=new Date(a[5].created_at).toLocaleString("en-US",{dateStyle:"short",timeStyle:"short"}).replace(", "," at ")+"",u,o,i,d,p,v,C,b,w="Delete",$,R;function J(){return a[2](a[5])}return{c(){e=_("tr"),r=_("td"),s=N(l),n=E(),c=_("td"),u=N(t),o=E(),i=_("td"),d=_("a"),p=N("Open"),C=E(),b=_("button"),b.textContent=w,this.h()},l(T){e=m(T,"TR",{class:!0});var k=y(e);r=m(k,"TD",{class:!0});var U=y(r);s=O(U,l),U.forEach(f),n=L(k),c=m(k,"TD",{class:!0});var B=y(c);u=O(B,t),B.forEach(f),o=L(k),i=m(k,"TD",{class:!0});var M=y(i);d=m(M,"A",{class:!0,href:!0});var j=y(d);p=O(j,"Open"),j.forEach(f),C=L(M),b=m(M,"BUTTON",{class:!0,"data-svelte-h":!0}),D(b)!=="svelte-1ypyy7z"&&(b.textContent=w),M.forEach(f),k.forEach(f),this.h()},h(){g(r,"class","px-6 py-4"),g(c,"class","px-6 py-4"),g(d,"class","btn btn-default"),g(d,"href",v=`${A}/${a[5].id}`),g(b,"class","btn btn-default"),g(i,"class","px-6 py-4"),g(e,"class","border border-slate-500")},m(T,k){S(T,e,k),h(e,r),h(r,s),h(e,n),h(e,c),h(c,u),h(e,o),h(e,i),h(i,d),h(d,p),h(i,C),h(i,b),$||(R=se(b,"click",J),$=!0)},p(T,k){a=T,k&1&&l!==(l=a[5].display_name+"")&&z(s,l),k&1&&t!==(t=new Date(a[5].created_at).toLocaleString("en-US",{dateStyle:"short",timeStyle:"short"}).replace(", "," at ")+"")&&z(u,t),k&1&&v!==(v=`${A}/${a[5].id}`)&&g(d,"href",v)},d(T){T&&f(e),$=!1,R()}}}function ve(a){let e,r='<td class="px-6 py-4" colspan="3">Loading...</td>';return{c(){e=_("tr"),e.innerHTML=r},l(l){e=m(l,"TR",{"data-svelte-h":!0}),D(e)!=="svelte-rkluvh"&&(e.innerHTML=r)},m(l,s){S(l,e,s)},p:x,d(l){l&&f(e)}}}function ke(a){let e,r,l,s,n='<tr class="border border-slate-500"><th scope="col" class="px-6 py-3">Name</th> <th scope="col" class="px-6 py-3">Created At</th> <th scope="col" class="px-6 py-3"></th></tr>',c,t,u,o,i,d={ctx:a,current:null,token:null,hasCatch:!1,pending:ve,then:be,catch:me,value:4};return W(u=a[0],d),{c(){e=_("div"),r=_("div"),l=_("table"),s=_("thead"),s.innerHTML=n,c=E(),t=_("tbody"),d.block.c(),this.h()},l(p){e=m(p,"DIV",{class:!0});var v=y(e);r=m(v,"DIV",{class:!0});var C=y(r);l=m(C,"TABLE",{class:!0});var b=y(l);s=m(b,"THEAD",{class:!0,"data-svelte-h":!0}),D(s)!=="svelte-1ua396j"&&(s.innerHTML=n),c=L(b),t=m(b,"TBODY",{});var w=y(t);d.block.l(w),w.forEach(f),b.forEach(f),C.forEach(f),v.forEach(f),this.h()},h(){g(s,"class","text-xs text-slate-300 uppercase bg-slate-700"),g(l,"class","text-sm text-left"),g(r,"class","mx-auto relative overflow-x-auto border border-slate-500 rounded-lg w-max"),g(e,"class","py-6 w-full")},m(p,v){S(p,e,v),h(e,r),h(r,l),h(l,s),h(l,c),h(l,t),d.block.m(t,d.anchor=null),d.mount=()=>t,d.anchor=null,o||(i=[q(P.call(null,t)),q(P.call(null,r))],o=!0)},p(p,[v]){a=p,d.ctx=a,v&1&&u!==(u=a[0])&&W(u,d)||_e(d,a,v)},i:x,o:x,d(p){p&&f(e),d.block.d(),d.token=null,d=null,o=!1,ee(i)}}}function ge(a,e,r){let l;te(a,he,t=>r(3,l=t));let s=V();le(()=>{l||ie(A+"/")});async function n(t){await fe.confirm("Are you sure you want to delete this chart? This cannot be undone")&&(await pe(t),r(0,s=V()))}return[s,n,t=>n(t.id)]}class De extends ue{constructor(e){super(),de(this,e,ge,ke,Z,{})}}export{De as component};
