const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./plotly.BHfggrdf.js","./db.B5uHdwgg.js","./preload-helper.Dch09mLN.js","./entry.DKiEKY5A.js","./scheduler.CaLR9Jb4.js","./paths.BBSiqN8P.js"])))=>i.map(i=>d[i]);
import{s as ae,e as T,c as E,b as V,f as k,l as C,a1 as Re,o as X,i as P,n as $,a2 as Ve,v as ze,W as Nt,E as Ee,a as H,g as L,B as ie,h as I,u as ke,p as q,q as Ae,A as me,r as Ce,k as Y,t as Z,d as J,j as se,m as x,a3 as gt,Z as Ue,C as he,_ as He,$ as Le,a0 as Be,X as Vt,O as At,a4 as Me,a5 as Ut,a6 as De}from"./scheduler.CaLR9Jb4.js";import{S as fe,i as ce,g as be,b as W,e as ge,t as R,c as te,a as le,m as ne,d as re,f as je}from"./index.sb9tC0rx.js";import{h as G,u as vt,p as Ie,j as We,k as Ht,n as qe}from"./db.B5uHdwgg.js";import{e as ee}from"./each.-gASlQSi.js";import{a as kt}from"./index.CV9K13ux.js";import{_ as Lt}from"./preload-helper.Dch09mLN.js";import{d as de,g as Bt}from"./entry.DKiEKY5A.js";import{s as Rt}from"./scrollbar.PZOHmB10.js";import{b as zt}from"./paths.BBSiqN8P.js";import{p as yt}from"./stores.DMrQvVjK.js";new TextEncoder;var Mt=typeof global=="object"&&global&&global.Object===Object&&global,Wt=typeof self=="object"&&self&&self.Object===Object&&self,wt=Mt||Wt||Function("return this")(),Oe=wt.Symbol,Ct=Object.prototype,qt=Ct.hasOwnProperty,Ft=Ct.toString,we=Oe?Oe.toStringTag:void 0;function Gt(l){var e=qt.call(l,we),t=l[we];try{l[we]=void 0;var n=!0}catch{}var r=Ft.call(l);return n&&(e?l[we]=t:delete l[we]),r}var Kt=Object.prototype,Xt=Kt.toString;function Zt(l){return Xt.call(l)}var Jt="[object Null]",Qt="[object Undefined]",Fe=Oe?Oe.toStringTag:void 0;function Yt(l){return l==null?l===void 0?Qt:Jt:Fe&&Fe in Object(l)?Gt(l):Zt(l)}function xt(l){return l!=null&&typeof l=="object"}var $t="[object Symbol]";function el(l){return typeof l=="symbol"||xt(l)&&Yt(l)==$t}var tl=/\s/;function ll(l){for(var e=l.length;e--&&tl.test(l.charAt(e)););return e}var nl=/^\s+/;function rl(l){return l&&l.slice(0,ll(l)+1).replace(nl,"")}function Ne(l){var e=typeof l;return l!=null&&(e=="object"||e=="function")}var Ge=NaN,sl=/^[-+]0x[0-9a-f]+$/i,ol=/^0b[01]+$/i,il=/^0o[0-7]+$/i,al=parseInt;function Ke(l){if(typeof l=="number")return l;if(el(l))return Ge;if(Ne(l)){var e=typeof l.valueOf=="function"?l.valueOf():l;l=Ne(e)?e+"":e}if(typeof l!="string")return l===0?l:+l;l=rl(l);var t=ol.test(l);return t||il.test(l)?al(l.slice(2),t?2:8):sl.test(l)?Ge:+l}var Pe=function(){return wt.Date.now()},fl="Expected a function",cl=Math.max,ul=Math.min;function dl(l,e,t){var n,r,s,i,c,o,d=0,u=!1,h=!1,a=!0;if(typeof l!="function")throw new TypeError(fl);e=Ke(e)||0,Ne(t)&&(u=!!t.leading,h="maxWait"in t,s=h?cl(Ke(t.maxWait)||0,e):s,a="trailing"in t?!!t.trailing:a);function y(g){var O=n,A=r;return n=r=void 0,d=g,i=l.apply(A,O),i}function v(g){return d=g,c=setTimeout(m,e),u?y(g):i}function f(g){var O=g-o,A=g-d,B=e-O;return h?ul(B,s-A):B}function b(g){var O=g-o,A=g-d;return o===void 0||O>=e||O<0||h&&A>=s}function m(){var g=Pe();if(b(g))return p(g);c=setTimeout(m,f(g))}function p(g){return c=void 0,a&&n?y(g):(n=r=void 0,i)}function _(){c!==void 0&&clearTimeout(c),d=0,n=o=r=c=void 0}function w(){return c===void 0?i:p(Pe())}function S(){var g=Pe(),O=b(g);if(n=arguments,r=this,o=g,O){if(c===void 0)return v(o);if(h)return clearTimeout(c),c=setTimeout(m,e),y(o)}return c===void 0&&(c=setTimeout(m,e)),i}return S.cancel=_,S.flush=w,S}function hl(l){let e,t;return{c(){e=T("div"),this.h()},l(n){e=E(n,"DIV",{class:!0}),V(e).forEach(k),this.h()},h(){C(e,"class",t=Re(l[2])+" svelte-kyrhf8"),X(e,"fillParent",l[1]),X(e,"fillParentWidth",l[4]),X(e,"fillParentHeight",l[3])},m(n,r){P(n,e,r),l[25](e)},p(n,r){r[0]&4&&t!==(t=Re(n[2])+" svelte-kyrhf8")&&C(e,"class",t),r[0]&6&&X(e,"fillParent",n[1]),r[0]&20&&X(e,"fillParentWidth",n[4]),r[0]&12&&X(e,"fillParentHeight",n[3])},i:$,o:$,d(n){n&&k(e),l[25](null)}}}const Xe=500,Ze=300;function _l(l,e,t){let n,r,s,i,c,o,d,u;const h=typeof window=="object",a=h?requestAnimationFrame:()=>{};async function y(){if(h&&p===void 0)if(window.Plotly)t(6,p=window.Plotly);else{const U=await Lt(()=>import("./plotly.BHfggrdf.js").then(ue=>ue.p),__vite__mapDeps([0,1,2,3,4,5]),import.meta.url);p===void 0&&t(6,p="default"in U?U.default:U)}}const v={plotly_afterexport:"afterExport",plotly_afterplot:"afterPlot",plotly_animated:"animated",plotly_animating:"animating",plotly_animatingframe:"animatingFrame",plotly_animationinterrupted:"animationInterrupted",plotly_autosize:"autoSize",plotly_beforeexport:"beforeExport",plotly_beforehover:"beforeHover",plotly_beforeplot:"beforePlot",plotly_buttonclicked:"buttonClicked",plotly_click:"click",plotly_clickannotation:"clickAnnotation",plotly_deselect:"deselect",plotly_doubleclick:"doubleClick",plotly_framework:"framework",plotly_hover:"hover",plotly_legendclick:"legendClick",plotly_legenddoubleclick:"legendDoubleClick",plotly_react:"react",plotly_redraw:"redraw",plotly_relayout:"relayout",plotly_relayouting:"relayouting",plotly_restyle:"restyle",plotly_selected:"selected",plotly_selecting:"selecting",plotly_sliderchange:"sliderChange",plotly_sliderend:"sliderEnd",plotly_sliderstart:"sliderStart",plotly_sunburstclick:"sunburstClick",plotly_transitioned:"transitioned",plotly_transitioning:"transitioning",plotly_transitioninterrupted:"transitionInterrupted",plotly_unhover:"unhover",plotly_update:"update",plotly_webglcontextlost:"webGLContextLost"},f=Ve();let{element:b=void 0}=e,{plot:m=void 0}=e,{libPlotly:p=void 0}=e,{data:_}=e,{layout:w=void 0}=e,{config:S=void 0}=e,{fillParent:g=!1}=e,{debounce:O=0}=e,{configReactivityStrategy:A="static-plot"}=e,{class:B=""}=e;ze(async()=>{window.global=window,await y()});let D=0,M=p,N=m,Q=Xe,K=Ze,_e=!1;const ye=async()=>{!p||!b||(_e&&A==="static-plot"&&(t(17,_e=!1),await p.react(b,_,s,{...i,staticPlot:!i.staticPlot})),t(5,m=await p.react(b,_,s,i)))};Nt(()=>b&&p?.purge(b));let oe,pe;ze(()=>pe=new ResizeObserver(j));const Se=U=>U&&pe?.observe(U),F=U=>U&&pe?.unobserve(U);function j(){if(!u||!b)return;const{offsetHeight:U,offsetWidth:ue}=u,{paddingLeft:ve,paddingTop:Te,paddingRight:Ot,paddingBottom:Pt}=window.getComputedStyle(u),Dt=ue-parseInt(ve)-parseInt(Ot),jt=U-parseInt(Te)-parseInt(Pt);t(15,Q=o?Dt:Xe),t(16,K=d?jt:Ze)}function z(U){Ee[U?"unshift":"push"](()=>{b=U,t(0,b)})}return l.$$set=U=>{"element"in U&&t(0,b=U.element),"plot"in U&&t(5,m=U.plot),"libPlotly"in U&&t(6,p=U.libPlotly),"data"in U&&t(7,_=U.data),"layout"in U&&t(8,w=U.layout),"config"in U&&t(9,S=U.config),"fillParent"in U&&t(1,g=U.fillParent),"debounce"in U&&t(10,O=U.debounce),"configReactivityStrategy"in U&&t(11,A=U.configReactivityStrategy),"class"in U&&t(2,B=U.class)},l.$$.update=()=>{if(l.$$.dirty[0]&1024&&t(24,n=typeof O=="object"?O.wait:O??0),l.$$.dirty[0]&1024&&t(23,r=typeof O=="object"?O:{}),l.$$.dirty[0]&4224&&t(12,D=(D+1)%1e3),l.$$.dirty[0]&102656&&t(22,s={datarevision:D,width:Q,height:K,...w}),l.$$.dirty[0]&512&&t(21,i={displaylogo:!1,...S}),l.$$.dirty[0]&2097152&&t(17,_e=!0),l.$$.dirty[0]&8257&&(b&&M!==p&&(M?.purge(b),t(5,m=void 0)),t(13,M=p),y()),l.$$.dirty[0]&16416&&N!==m){for(const[U,ue]of Object.entries(v))N?.removeAllListeners?.(U),m?.on(U,ve=>f(ue,ve));t(14,N=m)}l.$$.dirty[0]&25165824&&t(20,c=dl(ye,n,r)),l.$$.dirty[0]&7471297&&c(),l.$$.dirty[0]&2&&a(j),l.$$.dirty[0]&2&&t(4,o=g===!0||g==="width"),l.$$.dirty[0]&2&&t(3,d=g===!0||g==="height"),l.$$.dirty[0]&1&&t(19,u=b?.parentElement??void 0),l.$$.dirty[0]&786432&&(Se(u),F(oe),t(18,oe=u))},[b,g,B,d,o,m,p,_,w,S,O,A,D,M,N,Q,K,_e,oe,u,c,i,s,r,n,z]}class pl extends fe{constructor(e){super(),ce(this,e,_l,hl,ae,{element:0,plot:5,libPlotly:6,data:7,layout:8,config:9,fillParent:1,debounce:10,configReactivityStrategy:11,class:2},null,[-1,-1])}}function Je(l,e,t){const n=l.slice();return n[12]=e[t],n}function Qe(l,e,t){const n=l.slice();return n[15]=e[t],n}function Ye(l){let e;return{c(){e=T("div"),this.h()},l(t){e=E(t,"DIV",{class:!0}),V(e).forEach(k),this.h()},h(){C(e,"class","h-3 w-3 inline-block rounded-sm ms-1"),ie(e,"background-color",l[15])},m(t,n){P(t,e,n)},p(t,n){n&4&&ie(e,"background-color",t[15])},d(t){t&&k(e)}}}function xe(l){let e,t,n=l[12].label+"",r,s,i,c,o=ee(l[12].colors),d=[];for(let u=0;u<o.length;u+=1)d[u]=Ye(Qe(l,o,u));return{c(){e=T("div"),t=T("div"),r=Z(n),s=H(),i=T("div");for(let u=0;u<d.length;u+=1)d[u].c();c=H(),this.h()},l(u){e=E(u,"DIV",{class:!0});var h=V(e);t=E(h,"DIV",{class:!0});var a=V(t);r=J(a,n),a.forEach(k),s=L(h),i=E(h,"DIV",{class:!0});var y=V(i);for(let v=0;v<d.length;v+=1)d[v].l(y);y.forEach(k),c=L(h),h.forEach(k),this.h()},h(){C(t,"class","text-xs"),C(i,"class","inline-bloc ms-3"),C(e,"class","flex justify-between items-center px-2")},m(u,h){P(u,e,h),I(e,t),I(t,r),I(e,s),I(e,i);for(let a=0;a<d.length;a+=1)d[a]&&d[a].m(i,null);I(e,c)},p(u,h){if(h&4&&n!==(n=u[12].label+"")&&se(r,n),h&4){o=ee(u[12].colors);let a;for(a=0;a<o.length;a+=1){const y=Qe(u,o,a);d[a]?d[a].p(y,h):(d[a]=Ye(y),d[a].c(),d[a].m(i,null))}for(;a<d.length;a+=1)d[a].d(1);d.length=o.length}},d(u){u&&k(e),me(d,u)}}}function ml(l){let e,t='<div class="p-8 rounded-xl border border-slate-500 bg-slate-800"><p class="text-center text-2xl">Select some sensor data to plot in the top-left</p></div>';return{c(){e=T("div"),e.innerHTML=t,this.h()},l(n){e=E(n,"DIV",{class:!0,"data-svelte-h":!0}),x(e)!=="svelte-1ik9mlf"&&(e.innerHTML=t),this.h()},h(){C(e,"class","flex items-center justify-center h-full")},m(n,r){P(n,e,r)},p:$,i:$,o:$,d(n){n&&k(e)}}}function bl(l){let e,t;return e=new pl({props:{data:l[3].data,layout:l[3].layout,config:{scrollZoom:!0,displayModeBar:!1},fillParent:!0,debounce:250}}),{c(){te(e.$$.fragment)},l(n){le(e.$$.fragment,n)},m(n,r){ne(e,n,r),t=!0},p(n,r){const s={};r&8&&(s.data=n[3].data),r&8&&(s.layout=n[3].layout),e.$set(s)},i(n){t||(R(e.$$.fragment,n),t=!0)},o(n){W(e.$$.fragment,n),t=!1},d(n){re(e,n)}}}function gl(l){let e,t,n,r,s,i,c,o,d,u,h,a,y,v=ee(l[2]),f=[];for(let _=0;_<v.length;_+=1)f[_]=xe(Je(l,v,_));const b=[bl,ml],m=[];function p(_,w){return _[3].data.length>0?0:1}return d=p(l),u=m[d]=b[d](l),{c(){e=T("div"),t=T("div"),n=T("input"),r=H(),s=T("div");for(let _=0;_<f.length;_+=1)f[_].c();c=H(),o=T("div"),u.c(),this.h()},l(_){e=E(_,"DIV",{class:!0});var w=V(e);t=E(w,"DIV",{class:!0});var S=V(t);n=E(S,"INPUT",{class:!0,type:!0,placeholder:!0}),S.forEach(k),r=L(w),s=E(w,"DIV",{class:!0,style:!0});var g=V(s);for(let A=0;A<f.length;A+=1)f[A].l(g);g.forEach(k),c=L(w),o=E(w,"DIV",{class:!0});var O=V(o);u.l(O),O.forEach(k),w.forEach(k),this.h()},h(){C(n,"class","bg-slate-900 hover:bg-slate-800 focus:bg-slate-800 border border-slate-900 focus:border-slate-500 leading-relaxed px-1 rounded-lg min-w-md"),C(n,"type","text"),n.readOnly=l[1],C(n,"placeholder","Chart title"),ie(n,"width",`${Math.max(8,l[0].name.length)+2}ch`),C(t,"class","absolute mt-5 text-3xl text-slate-300 z-30 ms-20 font-bold max-w-2xl"),C(s,"class","absolute bg-slate-950 rounded border border-slate-500 w-max h-min max-h-20 z-30 me-2 mt-5 grid grid-rows-3 gap-x-2 grid-flow-col end-0"),C(s,"style",i=`grid-template-rows: repeat(${Math.min(l[2].length,3)}, minmax(0, 1fr));`),C(o,"class","ml-0 h-full"),ie(o,"margin-right","-78px"),C(e,"class","w-full h-full overflow-x-hidden relative")},m(_,w){P(_,e,w),I(e,t),I(t,n),ke(n,l[0].name),I(e,r),I(e,s);for(let S=0;S<f.length;S+=1)f[S]&&f[S].m(s,null);I(e,c),I(e,o),m[d].m(o,null),h=!0,a||(y=[q(n,"input",l[7]),Ae(kt.call(null,s))],a=!0)},p(_,[w]){if((!h||w&2)&&(n.readOnly=_[1]),w&1&&n.value!==_[0].name&&ke(n,_[0].name),w&1&&ie(n,"width",`${Math.max(8,_[0].name.length)+2}ch`),w&4){v=ee(_[2]);let g;for(g=0;g<v.length;g+=1){const O=Je(_,v,g);f[g]?f[g].p(O,w):(f[g]=xe(O),f[g].c(),f[g].m(s,null))}for(;g<f.length;g+=1)f[g].d(1);f.length=v.length}(!h||w&4&&i!==(i=`grid-template-rows: repeat(${Math.min(_[2].length,3)}, minmax(0, 1fr));`))&&C(s,"style",i);let S=d;d=p(_),d===S?m[d].p(_,w):(be(),W(m[S],1,1,()=>{m[S]=null}),ge(),u=m[d],u?u.p(_,w):(u=m[d]=b[d](_),u.c()),R(u,1),u.m(o,null))},i(_){h||(R(u),h=!0)},o(_){W(u),h=!1},d(_){_&&k(e),me(f,_),m[d].d(),a=!1,Ce(y)}}}function vl(l,e,t){let n,r,s,i;Y(l,G,f=>t(0,n=f));let c=[];const o=de([vt,G],([f,b])=>!f||f.id!==b.owner&&!!b.owner);Y(l,o,f=>t(1,r=f));const d={control:{unit:"%"},voltage:{unit:"V",range:[0,15]},temperature:{unit:"°C",range:[0,115]},fan:{unit:"RPM"},load:{unit:"%",range:[0,105]},power:{unit:"W"},clock:{unit:"MHz"},factor:{unit:"Unitless"},data:{unit:"GB"},smalldata:{unit:"KB"},level:{unit:"Varied"},throughput:{unit:"KB/s"}},u=de([G,Ie],([f,b])=>y(f,f.show,b));Y(l,u,f=>t(3,i=f));const h=de([G,Ie],([f,b])=>{const m=f.show.map(_=>f.charts[_]);return[...new Set(m.map(_=>_.path.split("/")[0]))].map(_=>({colors:m.filter(g=>g.path.includes(_)).map(g=>b.sensorColor[g.path]??g.color).sort((g,O)=>We(g).l-We(O).l),label:_}))});Y(l,h,f=>t(2,s=f));function a(f){const b=Array.from(new Set(f.map(_=>_.yaxis))).length,m=d[c[0]],p={showlegend:!1,paper_bgcolor:"#0f172a",plot_bgcolor:"#020617",font:{color:"#cbd5e1"},dragmode:"pan",hovermode:"x",yaxis:{domain:[0,1/b-.0125],title:`${c[0]?.toUpperCase()} (${m?.unit})`,gridcolor:"#64748b",range:m?.range},xaxis:{rangeslider:{visible:!0,thickness:.1}}};for(let _=2;_<=b;_++){console.log("working on",_);const w=d[c[_-1]];p[`yaxis${_}`]={domain:[(_-1)/b,_/b-.0125],title:`${c[_-1]?.toUpperCase()} (${w.unit})`,gridcolor:"#64748b",range:w.range}}return p}function y(f,b,m){if(b.length<1||f.charts.length<1)return{layout:{},data:[]};c=[];const p=f.subsets[f.selectedSubset],_=f.charts.filter((w,S)=>b.includes(S)).map(w=>{const S=f.getChartType(w.path);return S&&!c.includes(S)&&(console.log("Saw",S),c.push(S),console.log(c)),console.log("Putting data on y"+ +(c.findIndex(g=>g===S)+1)),{type:"scatter",x:f.xAxis,y:w.values.filter((g,O)=>!p||O>=p[0]&&O<=p[1]),yaxis:"y"+ +(c.findIndex(g=>g===S)+1),name:w.label,line:{color:m.sensorColor[w.path]??w.color}}});return console.log({traces:_}),{data:_,layout:a(_)}}function v(){n.name=this.value,G.set(n)}return[n,r,s,i,o,u,h,v]}class kl extends fe{constructor(e){super(),ce(this,e,vl,gl,ae,{})}}function $e(l,e,t){const n=l.slice();return n[19]=e[t],n}function yl(l){let e,t,n,r,s,i,c,o,d=l[7].includes(l[2].path),u,h,a,y,v=d&&et(l);return{c(){e=T("label"),t=T("input"),s=H(),i=T("span"),c=Z(l[1]),o=H(),v&&v.c(),this.h()},l(f){e=E(f,"LABEL",{for:!0,class:!0,style:!0});var b=V(e);t=E(b,"INPUT",{type:!0,id:!0}),s=L(b),i=E(b,"SPAN",{class:!0});var m=V(i);c=J(m,l[1]),m.forEach(k),o=L(b),v&&v.l(b),b.forEach(k),this.h()},h(){C(t,"type","checkbox"),t.checked=n=l[7].includes(l[2].path),C(t,"id",r=l[2].path?.replace(/\//g,"_")),C(i,"class","flex-shrink-1 w-full ps-3"),C(e,"for",u=l[2].path?.replace(/\//g,"_")),C(e,"class","flex align-top hover:text-slate-900 hover:bg-slate-300 px-2 rounded border border-transparent hover:border-slate-300 svelte-u9wk10"),C(e,"style",h=l[6].sensorColor[l[2].path]?`--hover-color: ${l[6].sensorColor[l[2].path]}40; --text: ${l[6].sensorColor[l[2].path]}`:`--hover-color: ${l[2].color}40; --text: ${l[2].color}`)},m(f,b){P(f,e,b),I(e,t),I(e,s),I(e,i),I(i,c),I(e,o),v&&v.m(e,null),a||(y=q(t,"click",l[15]),a=!0)},p(f,b){b&132&&n!==(n=f[7].includes(f[2].path))&&(t.checked=n),b&4&&r!==(r=f[2].path?.replace(/\//g,"_"))&&C(t,"id",r),b&2&&se(c,f[1]),b&132&&(d=f[7].includes(f[2].path)),d?v?v.p(f,b):(v=et(f),v.c(),v.m(e,null)):v&&(v.d(1),v=null),b&4&&u!==(u=f[2].path?.replace(/\//g,"_"))&&C(e,"for",u),b&68&&h!==(h=f[6].sensorColor[f[2].path]?`--hover-color: ${f[6].sensorColor[f[2].path]}40; --text: ${f[6].sensorColor[f[2].path]}`:`--hover-color: ${f[2].color}40; --text: ${f[2].color}`)&&C(e,"style",h)},i:$,o:$,d(f){f&&k(e),v&&v.d(),a=!1,y()}}}function wl(l){let e,t,n="▼",r,s,i,c,o,d,u,h,a,y;const v=l[14].default,f=Ue(v,l,l[17],null);let b=(l[4]||l[5]>0)&&tt(l),m=l[0]&&lt(l);return{c(){e=T("button"),t=T("span"),t.textContent=n,r=H(),s=T("div"),i=T("div"),f&&f.c(),c=H(),b&&b.c(),d=H(),m&&m.c(),u=he(),this.h()},l(p){e=E(p,"BUTTON",{class:!0,style:!0});var _=V(e);t=E(_,"SPAN",{class:!0,"data-svelte-h":!0}),x(t)!=="svelte-1juzcao"&&(t.textContent=n),r=L(_),s=E(_,"DIV",{class:!0});var w=V(s);i=E(w,"DIV",{class:!0});var S=V(i);f&&f.l(S),S.forEach(k),c=L(w),b&&b.l(w),w.forEach(k),_.forEach(k),d=L(p),m&&m.l(p),u=he(),this.h()},h(){C(t,"class","inline-block hover:bg-slate-500 text-center h-4 w-4 m-1 p-0 rounded-full text-orange-50 text-xs duration-150"),X(t,"rotate-180",!l[0]),X(t,"bg-orange-600",l[0]),C(i,"class","ms-2 capitalize"),C(s,"class","inline-flex flex-grow-1 w-full justify-between"),C(e,"class","px-2 bg-slate-700 border-slate-500 w-full text-start flex items-center heading hover:bg-slate-600 svelte-u9wk10"),C(e,"style",o="top: "+l[3]*32+"px; z-index: "+(999-l[3])),X(e,"border-bottom",l[0])},m(p,_){P(p,e,_),I(e,t),I(e,r),I(e,s),I(s,i),f&&f.m(i,null),I(s,c),b&&b.m(s,null),P(p,d,_),m&&m.m(p,_),P(p,u,_),h=!0,a||(y=q(e,"click",l[12]),a=!0)},p(p,_){(!h||_&1)&&X(t,"rotate-180",!p[0]),(!h||_&1)&&X(t,"bg-orange-600",p[0]),f&&f.p&&(!h||_&131072)&&He(f,v,p,p[17],h?Be(v,p[17],_,null):Le(p[17]),null),p[4]||p[5]>0?b?b.p(p,_):(b=tt(p),b.c(),b.m(s,null)):b&&(b.d(1),b=null),(!h||_&8&&o!==(o="top: "+p[3]*32+"px; z-index: "+(999-p[3])))&&C(e,"style",o),(!h||_&1)&&X(e,"border-bottom",p[0]),p[0]?m?(m.p(p,_),_&1&&R(m,1)):(m=lt(p),m.c(),R(m,1),m.m(u.parentNode,u)):m&&(be(),W(m,1,1,()=>{m=null}),ge())},i(p){h||(R(f,p),R(m),h=!0)},o(p){W(f,p),W(m),h=!1},d(p){p&&(k(e),k(d),k(u)),f&&f.d(p),b&&b.d(),m&&m.d(p),a=!1,y()}}}function et(l){let e,t,n,r;return{c(){e=T("input"),this.h()},l(s){e=E(s,"INPUT",{type:!0,class:!0}),this.h()},h(){C(e,"type","color"),C(e,"class","w-4 h-4 m-1 rounded-sm"),e.value=t=l[6].sensorColor[l[2].path]??l[2].color,ie(e,"background-color",l[6].sensorColor[l[2].path]??l[2].color)},m(s,i){P(s,e,i),n||(r=q(e,"change",l[16]),n=!0)},p(s,i){i&68&&t!==(t=s[6].sensorColor[s[2].path]??s[2].color)&&(e.value=t),i&68&&ie(e,"background-color",s[6].sensorColor[s[2].path]??s[2].color)},d(s){s&&k(e),n=!1,r()}}}function tt(l){let e,t;return{c(){e=T("span"),t=Z(l[5]),this.h()},l(n){e=E(n,"SPAN",{class:!0});var r=V(e);t=J(r,l[5]),r.forEach(k),this.h()},h(){C(e,"class","bg-slate-500 text-slate-200 rounded-full inline-block min-w-5 px-1 h-5 m-1 text-sm text-center")},m(n,r){P(n,e,r),I(e,t)},p(n,r){r&32&&se(t,n[5])},d(n){n&&k(e)}}}function lt(l){let e,t,n=ee(Object.keys(l[2].children)),r=[];for(let i=0;i<n.length;i+=1)r[i]=nt($e(l,n,i));const s=i=>W(r[i],1,1,()=>{r[i]=null});return{c(){e=T("ul");for(let i=0;i<r.length;i+=1)r[i].c();this.h()},l(i){e=E(i,"UL",{class:!0});var c=V(e);for(let o=0;o<r.length;o+=1)r[o].l(c);c.forEach(k),this.h()},h(){C(e,"class","border-t border-slate-500 relative z-50 first:border-l svelte-u9wk10")},m(i,c){P(i,e,c);for(let o=0;o<r.length;o+=1)r[o]&&r[o].m(e,null);t=!0},p(i,c){if(c&12){n=ee(Object.keys(i[2].children));let o;for(o=0;o<n.length;o+=1){const d=$e(i,n,o);r[o]?(r[o].p(d,c),R(r[o],1)):(r[o]=nt(d),r[o].c(),R(r[o],1),r[o].m(e,null))}for(be(),o=n.length;o<r.length;o+=1)s(o);ge()}},i(i){if(!t){for(let c=0;c<n.length;c+=1)R(r[c]);t=!0}},o(i){r=r.filter(Boolean);for(let c=0;c<r.length;c+=1)W(r[c]);t=!1},d(i){i&&k(e),me(r,i)}}}function Cl(l){let e=l[19]+"",t;return{c(){t=Z(e)},l(n){t=J(n,e)},m(n,r){P(n,t,r)},p(n,r){r&4&&e!==(e=n[19]+"")&&se(t,e)},d(n){n&&k(t)}}}function nt(l){let e,t,n,r;return t=new St({props:{label:l[19],item:l[2].children[l[19]],level:l[3]+1,$$slots:{default:[Cl]},$$scope:{ctx:l}}}),{c(){e=T("li"),te(t.$$.fragment),n=H(),this.h()},l(s){e=E(s,"LI",{class:!0});var i=V(e);le(t.$$.fragment,i),n=L(i),i.forEach(k),this.h()},h(){C(e,"class","svelte-u9wk10")},m(s,i){P(s,e,i),ne(t,e,null),I(e,n),r=!0},p(s,i){const c={};i&4&&(c.label=s[19]),i&4&&(c.item=s[2].children[s[19]]),i&8&&(c.level=s[3]+1),i&131076&&(c.$$scope={dirty:i,ctx:s}),t.$set(c)},i(s){r||(R(t.$$.fragment,s),r=!0)},o(s){W(t.$$.fragment,s),r=!1},d(s){s&&k(e),re(t)}}}function Sl(l){let e,t,n,r,s,i;const c=[wl,yl],o=[];function d(u,h){return u[2].children?0:1}return t=d(l),n=o[t]=c[t](l),{c(){e=T("div"),n.c(),this.h()},l(u){e=E(u,"DIV",{class:!0});var h=V(e);n.l(h),h.forEach(k),this.h()},h(){C(e,"class","item-holder w-full bg-slate-800 svelte-u9wk10")},m(u,h){P(u,e,h),o[t].m(e,null),r=!0,s||(i=Ae(kt.call(null,e)),s=!0)},p(u,[h]){let a=t;t=d(u),t===a?o[t].p(u,h):(be(),W(o[a],1,1,()=>{o[a]=null}),ge(),n=o[t],n?n.p(u,h):(n=o[t]=c[t](u),n.c()),R(n,1),n.m(e,null))},i(u){r||(R(n),r=!0)},o(u){W(n),r=!1},d(u){u&&k(e),o[t].d(),s=!1,i()}}}function Tl(l,e,t){let n,r,s,i;Y(l,G,g=>t(18,n=g)),Y(l,Ie,g=>t(6,s=g));let{$$slots:c={},$$scope:o}=e,{label:d=""}=e,{item:u}=e,{level:h=0}=e,{alwaysShow:a=!1}=e,{startOpen:y=!0}=e;const v=de(G,g=>g.show.map(O=>g.charts[O]).filter(O=>O.path.includes(u.path)).length??0);Y(l,v,g=>t(5,r=g));let{open:f=h>0&&r>0}=e;function b(g,O){if(n){const A=new Set(n.show),B=n.findByPath(O.path);A.has(B)?A.delete(B):A.add(B),gt(G,n.show=Array.from(A),n),G.set(n)}}function m(g,O){Ie.update(A=>(A.sensorColor[g]=O,A))}const p=de(G,g=>g?.show.map(O=>g.charts[O]?.path)??[]);Y(l,p,g=>t(7,i=g));function _(g){t(0,f=!f)}const w=g=>b(g,u),S=g=>m(u.path,g.currentTarget.value);return l.$$set=g=>{"label"in g&&t(1,d=g.label),"item"in g&&t(2,u=g.item),"level"in g&&t(3,h=g.level),"alwaysShow"in g&&t(4,a=g.alwaysShow),"startOpen"in g&&t(13,y=g.startOpen),"open"in g&&t(0,f=g.open),"$$scope"in g&&t(17,o=g.$$scope)},[f,d,u,h,a,r,s,i,v,b,m,p,_,y,c,w,S,o]}class St extends fe{constructor(e){super(),ce(this,e,Tl,Sl,ae,{label:1,item:2,level:3,alwaysShow:4,startOpen:13,open:0})}}function rt(l){let e,t,n,r,s,i,c,o,d="×",u,h,a,y;const v=l[3].default,f=Ue(v,l,l[2],null);return{c(){e=T("div"),t=T("div"),n=T("div"),r=T("div"),s=T("h1"),i=Z(l[1]),c=H(),o=T("button"),o.textContent=d,u=H(),f&&f.c(),this.h()},l(b){e=E(b,"DIV",{class:!0});var m=V(e);t=E(m,"DIV",{class:!0,role:!0});var p=V(t);n=E(p,"DIV",{class:!0,role:!0});var _=V(n);r=E(_,"DIV",{class:!0});var w=V(r);s=E(w,"H1",{class:!0});var S=V(s);i=J(S,l[1]),S.forEach(k),c=L(w),o=E(w,"BUTTON",{class:!0,"data-svelte-h":!0}),x(o)!=="svelte-w4g116"&&(o.textContent=d),w.forEach(k),u=L(_),f&&f.l(_),_.forEach(k),p.forEach(k),m.forEach(k),this.h()},h(){C(s,"class","text-xl uppercase font-bold"),C(o,"class","rounded-full hover:bg-slate-700 text-xl w-8 h-8 inline-block text-center align-middle"),C(r,"class","flex justify-between items-center mb-2"),C(n,"class","max-w-2xl p-5 mx-auto bg-slate-800 border border-slate-500 rounded-lg z-50"),C(n,"role","dialog"),C(t,"class","w-full min-h-full backdrop-blur-lg pt-12 pb-4"),C(t,"role","presentation"),C(e,"class","fixed top-0 w-full h-full overflow-auto modal-bg svelte-xt5rff")},m(b,m){P(b,e,m),I(e,t),I(t,n),I(n,r),I(r,s),I(s,i),I(r,c),I(r,o),I(n,u),f&&f.m(n,null),h=!0,a||(y=[q(o,"click",l[4]),q(n,"click",Vt(l[5])),q(n,"keyup",l[6]),q(t,"keyup",l[7]),q(t,"click",l[8])],a=!0)},p(b,m){(!h||m&2)&&se(i,b[1]),f&&f.p&&(!h||m&4)&&He(f,v,b,b[2],h?Be(v,b[2],m,null):Le(b[2]),null)},i(b){h||(R(f,b),h=!0)},o(b){W(f,b),h=!1},d(b){b&&k(e),f&&f.d(b),a=!1,Ce(y)}}}function El(l){let e,t,n=l[0]&&rt(l);return{c(){n&&n.c(),e=he()},l(r){n&&n.l(r),e=he()},m(r,s){n&&n.m(r,s),P(r,e,s),t=!0},p(r,[s]){r[0]?n?(n.p(r,s),s&1&&R(n,1)):(n=rt(r),n.c(),R(n,1),n.m(e.parentNode,e)):n&&(be(),W(n,1,1,()=>{n=null}),ge())},i(r){t||(R(n),t=!0)},o(r){W(n),t=!1},d(r){r&&k(e),n&&n.d(r)}}}function Il(l,e,t){let{$$slots:n={},$$scope:r}=e,{title:s=""}=e,{open:i=!1}=e;const c=()=>t(0,i=!1),o=()=>t(0,i=!0),d=a=>a.key==="esc"?t(0,i=!1):void 0,u=a=>a.key==="esc"?t(0,i=!1):void 0,h=()=>t(0,i=!1);return l.$$set=a=>{"title"in a&&t(1,s=a.title),"open"in a&&t(0,i=a.open),"$$scope"in a&&t(2,r=a.$$scope)},[i,s,r,n,c,o,d,u,h]}class Tt extends fe{constructor(e){super(),ce(this,e,Il,El,ae,{title:1,open:0})}}function st(l,e,t){const n=l.slice();return n[14]=e[t],n[15]=e,n[16]=t,n}function ot(l,e,t){const n=l.slice();return n[17]=e[t],n}function it(l,e,t){const n=l.slice();return n[17]=e[t],n[20]=e,n[21]=t,n}function at(l){let e,t,n,r="×",s,i,c;function o(){l[5].call(t,l[20],l[21])}function d(){return l[6](l[17])}function u(){return l[7](l[17])}return{c(){e=T("div"),t=T("input"),n=T("button"),n.textContent=r,s=H(),this.h()},l(h){e=E(h,"DIV",{class:!0});var a=V(e);t=E(a,"INPUT",{type:!0,class:!0}),n=E(a,"BUTTON",{class:!0,"data-svelte-h":!0}),x(n)!=="svelte-aem93e"&&(n.textContent=r),s=L(a),a.forEach(k),this.h()},h(){C(t,"type","text"),C(t,"class","form-control-sm me-4"),C(n,"class","text-white hover:text-red-700 rounded-full px-1"),C(e,"class","border-b border-slate-500 flex items-center justify-between p-2 last:border-b-0")},m(h,a){P(h,e,a),I(e,t),ke(t,l[17]),I(e,n),I(e,s),i||(c=[q(t,"input",o),q(t,"blur",d),q(n,"click",u)],i=!0)},p(h,a){l=h,a&4&&t.value!==l[17]&&ke(t,l[17])},d(h){h&&k(e),i=!1,Ce(c)}}}function ft(l){let e,t=l[17]+"",n,r;return{c(){e=T("option"),n=Z(t),this.h()},l(s){e=E(s,"OPTION",{});var i=V(e);n=J(i,t),i.forEach(k),this.h()},h(){e.__value=r=l[17],ke(e,e.__value)},m(s,i){P(s,e,i),I(e,n)},p(s,i){i&4&&t!==(t=s[17]+"")&&se(n,t),i&4&&r!==(r=s[17])&&(e.__value=r,ke(e,e.__value))},d(s){s&&k(e)}}}function ct(l){let e,t,n=l[14].label+"",r,s,i,c,o,d=l[14].type+"",u,h,a,y,v,f,b=ee(l[2]),m=[];for(let _=0;_<b.length;_+=1)m[_]=ft(ot(l,b,_));function p(){l[9].call(a,l[15],l[16])}return{c(){e=T("div"),t=T("h3"),r=Z(n),s=Z(":"),i=H(),c=T("div"),o=T("span"),u=Z(d),h=H(),a=T("select");for(let _=0;_<m.length;_+=1)m[_].c();y=H(),this.h()},l(_){e=E(_,"DIV",{class:!0});var w=V(e);t=E(w,"H3",{class:!0});var S=V(t);r=J(S,n),s=J(S,":"),S.forEach(k),i=L(w),c=E(w,"DIV",{class:!0});var g=V(c);o=E(g,"SPAN",{class:!0});var O=V(o);u=J(O,d),O.forEach(k),h=L(g),a=E(g,"SELECT",{class:!0});var A=V(a);for(let B=0;B<m.length;B+=1)m[B].l(A);A.forEach(k),g.forEach(k),y=L(w),w.forEach(k),this.h()},h(){C(t,"class","font-bold"),C(o,"class","text-xs uppercase font-bold text-slate-500 me-3"),C(a,"class","form-control-sm"),l[14].device===void 0&&At(p),C(c,"class","flex items-center"),C(e,"class","border-b border-slate-500 flex items-center justify-between p-2 last:border-b-0")},m(_,w){P(_,e,w),I(e,t),I(t,r),I(t,s),I(e,i),I(e,c),I(c,o),I(o,u),I(c,h),I(c,a);for(let S=0;S<m.length;S+=1)m[S]&&m[S].m(a,null);Me(a,l[14].device,!0),I(e,y),v||(f=q(a,"change",p),v=!0)},p(_,w){if(l=_,w&1&&n!==(n=l[14].label+"")&&se(r,n),w&1&&d!==(d=l[14].type+"")&&se(u,d),w&4){b=ee(l[2]);let S;for(S=0;S<b.length;S+=1){const g=ot(l,b,S);m[S]?m[S].p(g,w):(m[S]=ft(g),m[S].c(),m[S].m(a,null))}for(;S<m.length;S+=1)m[S].d(1);m.length=b.length}w&5&&Me(a,l[14].device)},d(_){_&&k(e),me(m,_),v=!1,f()}}}function Ol(l){let e,t="Devices",n,r,s,i,c="Add new device",o,d,u="Sensors",h,a,y,v,f,b="Save Changes",m,p,_="Cancel",w,S,g=ee(l[2]),O=[];for(let D=0;D<g.length;D+=1)O[D]=at(it(l,g,D));let A=ee(l[0]),B=[];for(let D=0;D<A.length;D+=1)B[D]=ct(st(l,A,D));return{c(){e=T("h2"),e.textContent=t,n=H(),r=T("div");for(let D=0;D<O.length;D+=1)O[D].c();s=H(),i=T("button"),i.textContent=c,o=H(),d=T("h2"),d.textContent=u,h=H(),a=T("div");for(let D=0;D<B.length;D+=1)B[D].c();y=H(),v=T("div"),f=T("button"),f.textContent=b,m=H(),p=T("button"),p.textContent=_,this.h()},l(D){e=E(D,"H2",{class:!0,"data-svelte-h":!0}),x(e)!=="svelte-1lctr5"&&(e.textContent=t),n=L(D),r=E(D,"DIV",{class:!0});var M=V(r);for(let K=0;K<O.length;K+=1)O[K].l(M);M.forEach(k),s=L(D),i=E(D,"BUTTON",{class:!0,"data-svelte-h":!0}),x(i)!=="svelte-d5tarf"&&(i.textContent=c),o=L(D),d=E(D,"H2",{class:!0,"data-svelte-h":!0}),x(d)!=="svelte-dbgvk1"&&(d.textContent=u),h=L(D),a=E(D,"DIV",{class:!0});var N=V(a);for(let K=0;K<B.length;K+=1)B[K].l(N);N.forEach(k),y=L(D),v=E(D,"DIV",{class:!0});var Q=V(v);f=E(Q,"BUTTON",{class:!0,"data-svelte-h":!0}),x(f)!=="svelte-v1wzkw"&&(f.textContent=b),m=L(Q),p=E(Q,"BUTTON",{class:!0,"data-svelte-h":!0}),x(p)!=="svelte-tcuwvs"&&(p.textContent=_),Q.forEach(k),this.h()},h(){C(e,"class","text-lg uppercase font-bold text-slate-400 mt-5 mb-4"),C(r,"class","border border-slate-500 rounded"),C(i,"class","btn btn-default mt-3"),C(d,"class","text-lg uppercase font-bold text-slate-400 mt-5 mb-4"),C(a,"class","border rounded border-slate-500"),C(f,"class","btn btn-primary"),C(p,"class","btn btn-default"),C(v,"class","mt-6")},m(D,M){P(D,e,M),P(D,n,M),P(D,r,M);for(let N=0;N<O.length;N+=1)O[N]&&O[N].m(r,null);P(D,s,M),P(D,i,M),P(D,o,M),P(D,d,M),P(D,h,M),P(D,a,M);for(let N=0;N<B.length;N+=1)B[N]&&B[N].m(a,null);P(D,y,M),P(D,v,M),I(v,f),I(v,m),I(v,p),w||(S=[q(i,"click",l[8]),q(f,"click",l[10]),q(p,"click",l[11])],w=!0)},p(D,[M]){if(M&7){g=ee(D[2]);let N;for(N=0;N<g.length;N+=1){const Q=it(D,g,N);O[N]?O[N].p(Q,M):(O[N]=at(Q),O[N].c(),O[N].m(r,null))}for(;N<O.length;N+=1)O[N].d(1);O.length=g.length}if(M&5){A=ee(D[0]);let N;for(N=0;N<A.length;N+=1){const Q=st(D,A,N);B[N]?B[N].p(Q,M):(B[N]=ct(Q),B[N].c(),B[N].m(a,null))}for(;N<B.length;N+=1)B[N].d(1);B.length=A.length}},i:$,o:$,d(D){D&&(k(e),k(n),k(r),k(s),k(i),k(o),k(d),k(h),k(a),k(y),k(v)),me(O,D),me(B,D),w=!1,Ce(S)}}}function Pl(l,e,t){let n;Y(l,G,m=>t(12,n=m));let r=n.show,s=n.charts.map(({path:m,label:p,color:_,values:w},S)=>{const[g,O,A]=m.split("/");return{label:p,device:g,type:O,color:_,values:w,sensorId:A,show:r.includes(S)}});const i=Ve();let c=new Set(s.map(m=>m.device)),o=Array.from(c);function d(){const m=n;m.charts=s.map(({label:_,device:w,type:S,color:g,values:O,sensorId:A},B)=>({label:_,path:`${w}/${S}/${A}`,color:g,values:O}));const p=[];s.forEach((_,w)=>{_.show&&p.push(w)}),m.show=p,m.regenerateMap(),G.set(m)}function u(m,p){m[p]=this.value,t(2,o)}const h=m=>{t(1,c=new Set(o)),t(0,s=s.map(p=>c.has(p.device)?p:{...p,device:m}))},a=m=>{c.delete(m),t(2,o=Array.from(c))},y=()=>t(2,o=o.concat("New device"));function v(m,p){m[p].device=Ut(this),t(0,s),t(2,o)}return[s,c,o,i,d,u,h,a,y,v,()=>{d(),i("closed",{closed:!0})},()=>{console.log("dispatching close"),i("closed",{closed:!0})}]}class Dl extends fe{constructor(e){super(),ce(this,e,Pl,Ol,ae,{})}}function jl(l){let e;return{c(){e=Z("Sensors")},l(t){e=J(t,"Sensors")},m(t,n){P(t,e,n)},d(t){t&&k(e)}}}function ut(l){let e,t="Edit sensors",n,r;return{c(){e=T("button"),e.textContent=t,this.h()},l(s){e=E(s,"BUTTON",{class:!0,"data-svelte-h":!0}),x(e)!=="svelte-hsd8nr"&&(e.textContent=t),this.h()},h(){C(e,"class","btn-sm btn-default m-1 w-max")},m(s,i){P(s,e,i),n||(r=q(e,"click",l[7]),n=!0)},p:$,d(s){s&&k(e),n=!1,r()}}}function Nl(l){let e,t;return e=new Dl({}),e.$on("closed",l[8]),{c(){te(e.$$.fragment)},l(n){le(e.$$.fragment,n)},m(n,r){ne(e,n,r),t=!0},p:$,i(n){t||(R(e.$$.fragment,n),t=!0)},o(n){W(e.$$.fragment,n),t=!1},d(n){re(e,n)}}}function Vl(l){let e,t,n,r,s,i,c,o,d,u,h,a;function y(p){l[6](p)}let v={label:"Sensors",item:{children:l[4],path:""},alwaysShow:!0,startOpen:l[0],$$slots:{default:[jl]},$$scope:{ctx:l}};l[2]!==void 0&&(v.open=l[2]),r=new St({props:v}),Ee.push(()=>je(r,"open",y));let f=l[2]&&ut(l);function b(p){l[9](p)}let m={title:"Edit Sensors",$$slots:{default:[Nl]},$$scope:{ctx:l}};return l[3]!==void 0&&(m.open=l[3]),o=new Tt({props:m}),Ee.push(()=>je(o,"open",b)),{c(){e=T("div"),t=T("div"),n=T("div"),te(r.$$.fragment),i=H(),f&&f.c(),c=H(),te(o.$$.fragment),this.h()},l(p){e=E(p,"DIV",{class:!0});var _=V(e);t=E(_,"DIV",{class:!0});var w=V(t);n=E(w,"DIV",{});var S=V(n);le(r.$$.fragment,S),i=L(S),f&&f.l(S),S.forEach(k),w.forEach(k),_.forEach(k),c=L(p),le(o.$$.fragment,p),this.h()},h(){C(t,"class","overflow-auto bg-slate-800 flex-shrink-0 w-96"),ie(t,"max-height",l[1]),C(e,"class","border border-slate-500 rounded overflow-hidden")},m(p,_){P(p,e,_),I(e,t),I(t,n),ne(r,n,null),I(n,i),f&&f.m(n,null),P(p,c,_),ne(o,p,_),u=!0,h||(a=Ae(Rt.call(null,t)),h=!0)},p(p,[_]){const w={};_&16&&(w.item={children:p[4],path:""}),_&1&&(w.startOpen=p[0]),_&1024&&(w.$$scope={dirty:_,ctx:p}),!s&&_&4&&(s=!0,w.open=p[2],De(()=>s=!1)),r.$set(w),p[2]?f?f.p(p,_):(f=ut(p),f.c(),f.m(n,null)):f&&(f.d(1),f=null),_&2&&ie(t,"max-height",p[1]);const S={};_&1032&&(S.$$scope={dirty:_,ctx:p}),!d&&_&8&&(d=!0,S.open=p[3],De(()=>d=!1)),o.$set(S)},i(p){u||(R(r.$$.fragment,p),R(o.$$.fragment,p),u=!0)},o(p){W(r.$$.fragment,p),W(o.$$.fragment,p),u=!1},d(p){p&&(k(e),k(c)),re(r),f&&f.d(),re(o,p),h=!1,a()}}}function Al(l,e,t){let n,{startOpen:r=!0}=e,{maxHeight:s="calc(100dvh - 16px)"}=e;const i=de(G,y=>{const v={};return(y?.charts??[]).forEach(f=>{const[b,m,p]=f.path.split("/");v[b]||(v[b]={path:b,children:{}}),v[b].children[m]||(v[b].children[m]={path:`${b}/${m}`,children:{}}),v[b].children[m].children[f.label]||(v[b].children[m].children[f.label]={path:`${b}/${m}/${p}`,selected:!1,color:f.color})}),v});Y(l,i,y=>t(4,n=y));let c=!1,o=!1;function d(y){c=y,t(2,c)}const u=()=>t(3,o=!0),h=()=>{t(3,o=!1)};function a(y){o=y,t(3,o)}return l.$$set=y=>{"startOpen"in y&&t(0,r=y.startOpen),"maxHeight"in y&&t(1,s=y.maxHeight)},[r,s,c,o,n,i,d,u,h,a]}class Et extends fe{constructor(e){super(),ce(this,e,Al,Vl,ae,{startOpen:0,maxHeight:1})}}function dt(l,e,t){const n=l.slice();return n[6]=e[t][0],n[7]=e[t][1],n[9]=t,n}function ht(l){let e,t,n="Show All",r,s,i,c=ee(l[0]?.subsets??[]),o=[];for(let d=0;d<c.length;d+=1)o[d]=_t(dt(l,c,d));return{c(){e=T("div"),t=T("button"),t.textContent=n,r=H();for(let d=0;d<o.length;d+=1)o[d].c();this.h()},l(d){e=E(d,"DIV",{class:!0});var u=V(e);t=E(u,"BUTTON",{class:!0,"data-svelte-h":!0}),x(t)!=="svelte-1w8ly9m"&&(t.textContent=n),r=L(u);for(let h=0;h<o.length;h+=1)o[h].l(u);u.forEach(k),this.h()},h(){C(t,"class","hover:border-orange-500 bg-slate-800 border border-slate-500 text-slate-300 rounded-full px-2"),X(t,"bg-orange-700",!l[1]),X(t,"bg-slate-800",l[1]),C(e,"class","flex gap-2 pt-1 flex-wrap")},m(d,u){P(d,e,u),I(e,t),I(e,r);for(let h=0;h<o.length;h+=1)o[h]&&o[h].m(e,null);s||(i=q(t,"click",l[4]),s=!0)},p(d,u){if(u&2&&X(t,"bg-orange-700",!d[1]),u&2&&X(t,"bg-slate-800",d[1]),u&11){c=ee(d[0]?.subsets??[]);let h;for(h=0;h<c.length;h+=1){const a=dt(d,c,h);o[h]?o[h].p(a,u):(o[h]=_t(a),o[h].c(),o[h].m(e,null))}for(;h<o.length;h+=1)o[h].d(1);o.length=c.length}},d(d){d&&k(e),me(o,d),s=!1,i()}}}function _t(l){let e,t=l[0].xAxis[l[6]].toLocaleTimeString("en-US",{timeStyle:"short"})+"",n,r,s=l[0].xAxis[l[7]].toLocaleTimeString("en-US",{timeStyle:"short"})+"",i,c,o,d;function u(){return l[5](l[9])}return{c(){e=T("button"),n=Z(t),r=Z(" - "),i=Z(s),c=H(),this.h()},l(h){e=E(h,"BUTTON",{class:!0});var a=V(e);n=J(a,t),r=J(a," - "),i=J(a,s),c=L(a),a.forEach(k),this.h()},h(){C(e,"class","hover:border-orange-500 bg-slate-800 border border-slate-500 text-slate-300 rounded-full px-2"),X(e,"bg-orange-700",l[1]?.join("|")===[l[6],l[7]].join("|")),X(e,"bg-slate-800",l[1]?.join("|")!==[l[6],l[7]].join("|"))},m(h,a){P(h,e,a),I(e,n),I(e,r),I(e,i),I(e,c),o||(d=q(e,"click",u),o=!0)},p(h,a){l=h,a&1&&t!==(t=l[0].xAxis[l[6]].toLocaleTimeString("en-US",{timeStyle:"short"})+"")&&se(n,t),a&1&&s!==(s=l[0].xAxis[l[7]].toLocaleTimeString("en-US",{timeStyle:"short"})+"")&&se(i,s),a&3&&X(e,"bg-orange-700",l[1]?.join("|")===[l[6],l[7]].join("|")),a&3&&X(e,"bg-slate-800",l[1]?.join("|")!==[l[6],l[7]].join("|"))},d(h){h&&k(e),o=!1,d()}}}function Ul(l){let e,t=l[0].subsets.length>1&&ht(l);return{c(){t&&t.c(),e=he()},l(n){t&&t.l(n),e=he()},m(n,r){t&&t.m(n,r),P(n,e,r)},p(n,[r]){n[0].subsets.length>1?t?t.p(n,r):(t=ht(n),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},i:$,o:$,d(n){n&&k(e),t&&t.d(n)}}}function Hl(l,e,t){let n,r;Y(l,G,d=>t(0,n=d));const s=de(G,d=>d?.subsets[d.selectedSubset]);Y(l,s,d=>t(1,r=d));function i(d){G.update(u=>(u&&(u.selectedSubset=d),u))}return[n,r,s,i,()=>i(-1),d=>i(d)]}class It extends fe{constructor(e){super(),ce(this,e,Hl,Ul,ae,{})}}function pt(l){let e,t,n="Select timeframe to export",r,s,i;return s=new It({}),{c(){e=T("div"),t=T("h2"),t.textContent=n,r=H(),te(s.$$.fragment),this.h()},l(c){e=E(c,"DIV",{class:!0});var o=V(e);t=E(o,"H2",{class:!0,"data-svelte-h":!0}),x(t)!=="svelte-1p9n0tq"&&(t.textContent=n),r=L(o),le(s.$$.fragment,o),o.forEach(k),this.h()},h(){C(t,"class","text-sm text-slate-400 ps-2 pt-3"),C(e,"class","z-30")},m(c,o){P(c,e,o),I(e,t),I(e,r),ne(s,e,null),i=!0},i(c){i||(R(s.$$.fragment,c),i=!0)},o(c){W(s.$$.fragment,c),i=!1},d(c){c&&k(e),re(s)}}}function Ll(l){let e,t="Name",n,r,s,i,c,o="Select sensors to export (leave empty to export all)",d,u,h,a,y,v,f="Select All",b,m,p,_,w,S=(l[1][1]>0?l[1][1]-l[1][0]:l[0].xAxis.length)+"",g,O,A,B=(l[0].show.length??0)+"",D,M,N,Q,K,_e=l[3]?"Update Chart":"Share to The World",ye,oe,pe,Se;a=new Et({props:{startOpen:!1,maxHeight:"512px"}});let F=l[0].subsets.length>1&&pt();return{c(){e=T("h2"),e.textContent=t,n=H(),r=T("input"),i=H(),c=T("h2"),c.textContent=o,d=H(),u=T("div"),h=T("div"),te(a.$$.fragment),y=H(),v=T("button"),v.textContent=f,b=H(),F&&F.c(),m=H(),p=T("hr"),_=Z(`\r
This will share\r
`),w=T("strong"),g=Z(S),O=Z(`\r
readings from\r
`),A=T("strong"),D=Z(B),M=Z(`\r
sensors to the public. Anyone who has the link can see it.\r
`),N=T("hr"),Q=H(),K=T("button"),ye=Z(_e),this.h()},l(j){e=E(j,"H2",{class:!0,"data-svelte-h":!0}),x(e)!=="svelte-kd22pg"&&(e.textContent=t),n=L(j),r=E(j,"INPUT",{type:!0,class:!0}),i=L(j),c=E(j,"H2",{class:!0,"data-svelte-h":!0}),x(c)!=="svelte-ikgrn1"&&(c.textContent=o),d=L(j),u=E(j,"DIV",{class:!0});var z=V(u);h=E(z,"DIV",{class:!0});var U=V(h);le(a.$$.fragment,U),U.forEach(k),y=L(z),v=E(z,"BUTTON",{class:!0,"data-svelte-h":!0}),x(v)!=="svelte-1xu1ufp"&&(v.textContent=f),z.forEach(k),b=L(j),F&&F.l(j),m=L(j),p=E(j,"HR",{class:!0}),_=J(j,`\r
This will share\r
`),w=E(j,"STRONG",{});var ue=V(w);g=J(ue,S),ue.forEach(k),O=J(j,`\r
readings from\r
`),A=E(j,"STRONG",{});var ve=V(A);D=J(ve,B),ve.forEach(k),M=J(j,`\r
sensors to the public. Anyone who has the link can see it.\r
`),N=E(j,"HR",{class:!0}),Q=L(j),K=E(j,"BUTTON",{class:!0});var Te=V(K);ye=J(Te,_e),Te.forEach(k),this.h()},h(){C(e,"class","text-sm text-slate-400 ps-2"),C(r,"type","text"),C(r,"class","form-control text-lg"),r.value=s=l[0]?.name??"",C(c,"class","text-sm text-slate-400 ps-2 pt-3"),C(h,"class","h-8 z-50"),C(v,"class","btn btn-default ms-3 flex-grow"),C(u,"class","flex"),C(p,"class","border-slate-500 my-5"),C(N,"class","border-slate-500 my-5"),C(K,"class","btn btn-primary")},m(j,z){P(j,e,z),P(j,n,z),P(j,r,z),P(j,i,z),P(j,c,z),P(j,d,z),P(j,u,z),I(u,h),ne(a,h,null),I(u,y),I(u,v),P(j,b,z),F&&F.m(j,z),P(j,m,z),P(j,p,z),P(j,_,z),P(j,w,z),I(w,g),P(j,O,z),P(j,A,z),I(A,D),P(j,M,z),P(j,N,z),P(j,Q,z),P(j,K,z),I(K,ye),oe=!0,pe||(Se=[q(r,"change",l[5]),q(v,"click",l[6]),q(K,"click",l[4])],pe=!0)},p(j,[z]){(!oe||z&1&&s!==(s=j[0]?.name??"")&&r.value!==s)&&(r.value=s),j[0].subsets.length>1?F?z&1&&R(F,1):(F=pt(),F.c(),R(F,1),F.m(m.parentNode,m)):F&&(be(),W(F,1,1,()=>{F=null}),ge()),(!oe||z&3)&&S!==(S=(j[1][1]>0?j[1][1]-j[1][0]:j[0].xAxis.length)+"")&&se(g,S),(!oe||z&1)&&B!==(B=(j[0].show.length??0)+"")&&se(D,B)},i(j){oe||(R(a.$$.fragment,j),R(F),oe=!0)},o(j){W(a.$$.fragment,j),W(F),oe=!1},d(j){j&&(k(e),k(n),k(r),k(i),k(c),k(d),k(u),k(b),k(m),k(p),k(_),k(w),k(O),k(A),k(M),k(N),k(Q),k(K)),re(a),F&&F.d(j),pe=!1,Ce(Se)}}}function Bl(l,e,t){let n,r,s;Y(l,yt,a=>t(7,n=a)),Y(l,G,a=>t(0,r=a));const i=Ve(),c=de(G,a=>a?.subsets[a.selectedSubset]??[0,0]);Y(l,c,a=>t(1,s=a));const o=n.params.id;async function d(){const a=await Ht(o).catch(y=>{throw qe.error("Error saving chart"),y});qe.info("Saved successfully"),i("closed",{closed:!0}),a!==o&&Bt(zt+"/"+a)}return[r,s,c,o,d,a=>G.update(y=>(y.name=a.currentTarget.value,y)),()=>{r&&gt(G,r.show=[],r)}]}class Rl extends fe{constructor(e){super(),ce(this,e,Bl,Ll,ae,{})}}function zl(l){let e;const t=l[4].default,n=Ue(t,l,l[8],null);return{c(){n&&n.c()},l(r){n&&n.l(r)},m(r,s){n&&n.m(r,s),e=!0},p(r,s){n&&n.p&&(!e||s&256)&&He(n,t,r,r[8],e?Be(t,r[8],s,null):Le(r[8]),null)},i(r){e||(R(n,r),e=!0)},o(r){W(n,r),e=!1},d(r){n&&n.d(r)}}}function Ml(l){let e,t,n,r,s,i,c,o,d;t=new Et({});let u=l[1].subsets.length>1&&mt();s=new It({});function h(v,f){return v[2]?ql:Wl}let a=h(l),y=a(l);return o=new kl({}),{c(){e=T("div"),te(t.$$.fragment),n=H(),u&&u.c(),r=H(),te(s.$$.fragment),i=H(),y.c(),c=H(),te(o.$$.fragment),this.h()},l(v){e=E(v,"DIV",{class:!0});var f=V(e);le(t.$$.fragment,f),n=L(f),u&&u.l(f),r=L(f),le(s.$$.fragment,f),i=L(f),y.l(f),f.forEach(k),c=L(v),le(o.$$.fragment,v),this.h()},h(){C(e,"class","fixed top-0 left-0 w-full flex h-9 m-2 items-start z-40")},m(v,f){P(v,e,f),ne(t,e,null),I(e,n),u&&u.m(e,null),I(e,r),ne(s,e,null),I(e,i),y.m(e,null),P(v,c,f),ne(o,v,f),d=!0},p(v,f){v[1].subsets.length>1?u||(u=mt(),u.c(),u.m(e,r)):u&&(u.d(1),u=null),a===(a=h(v))&&y?y.p(v,f):(y.d(1),y=a(v),y&&(y.c(),y.m(e,null)))},i(v){d||(R(t.$$.fragment,v),R(s.$$.fragment,v),R(o.$$.fragment,v),d=!0)},o(v){W(t.$$.fragment,v),W(s.$$.fragment,v),W(o.$$.fragment,v),d=!1},d(v){v&&(k(e),k(c)),re(t),u&&u.d(),re(s),y.d(),re(o,v)}}}function mt(l){let e,t="Data ranges:";return{c(){e=T("div"),e.textContent=t,this.h()},l(n){e=E(n,"DIV",{class:!0,"data-svelte-h":!0}),x(e)!=="svelte-9q3kh8"&&(e.textContent=t),this.h()},h(){C(e,"class","text-slate-500 uppercase pt-1 px-3")},m(n,r){P(n,e,r)},d(n){n&&k(e)}}}function Wl(l){let e,t="Sign in to save charts";return{c(){e=T("span"),e.textContent=t,this.h()},l(n){e=E(n,"SPAN",{class:!0,"data-svelte-h":!0}),x(e)!=="svelte-8djkf1"&&(e.textContent=t),this.h()},h(){C(e,"class","uppercase text-xs text-slate-500 font-bold mx-4 my-2")},m(n,r){P(n,e,r)},p:$,d(n){n&&k(e)}}}function ql(l){let e,t=(l[2]?.id===l[1].owner||!l[1].owner)&&bt(l);return{c(){t&&t.c(),e=he()},l(n){t&&t.l(n),e=he()},m(n,r){t&&t.m(n,r),P(n,e,r)},p(n,r){n[2]?.id===n[1].owner||!n[1].owner?t?t.p(n,r):(t=bt(n),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},d(n){n&&k(e),t&&t.d(n)}}}function bt(l){let e,t=l[3]?"Save Changes":"Share Chart",n,r,s;return{c(){e=T("button"),n=Z(t),this.h()},l(i){e=E(i,"BUTTON",{class:!0});var c=V(e);n=J(c,t),c.forEach(k),this.h()},h(){C(e,"class","btn btn-primary ms-5")},m(i,c){P(i,e,c),I(e,n),r||(s=q(e,"click",l[5]),r=!0)},p:$,d(i){i&&k(e),r=!1,s()}}}function Fl(l){let e,t;return e=new Rl({}),e.$on("closed",l[6]),{c(){te(e.$$.fragment)},l(n){le(e.$$.fragment,n)},m(n,r){ne(e,n,r),t=!0},p:$,i(n){t||(R(e.$$.fragment,n),t=!0)},o(n){W(e.$$.fragment,n),t=!1},d(n){re(e,n)}}}function Gl(l){let e,t,n,r,s,i;const c=[Ml,zl],o=[];function d(a,y){return a[1]?0:1}e=d(l),t=o[e]=c[e](l);function u(a){l[7](a)}let h={title:"Save Chart",$$slots:{default:[Fl]},$$scope:{ctx:l}};return l[0]!==void 0&&(h.open=l[0]),r=new Tt({props:h}),Ee.push(()=>je(r,"open",u)),{c(){t.c(),n=H(),te(r.$$.fragment)},l(a){t.l(a),n=L(a),le(r.$$.fragment,a)},m(a,y){o[e].m(a,y),P(a,n,y),ne(r,a,y),i=!0},p(a,[y]){let v=e;e=d(a),e===v?o[e].p(a,y):(be(),W(o[v],1,1,()=>{o[v]=null}),ge(),t=o[e],t?t.p(a,y):(t=o[e]=c[e](a),t.c()),R(t,1),t.m(n.parentNode,n));const f={};y&257&&(f.$$scope={dirty:y,ctx:a}),!s&&y&1&&(s=!0,f.open=a[0],De(()=>s=!1)),r.$set(f)},i(a){i||(R(t),R(r.$$.fragment,a),i=!0)},o(a){W(t),W(r.$$.fragment,a),i=!1},d(a){a&&k(n),o[e].d(a),re(r,a)}}}function Kl(l,e,t){let n,r,s;Y(l,yt,y=>t(9,n=y)),Y(l,G,y=>t(1,r=y)),Y(l,vt,y=>t(2,s=y));let{$$slots:i={},$$scope:c}=e,o=!1;const d=n.params.id,u=()=>t(0,o=!0),h=()=>{console.log("closed"),t(0,o=!1)};function a(y){o=y,t(0,o)}return l.$$set=y=>{"$$scope"in y&&t(8,c=y.$$scope)},[o,r,s,d,i,u,h,a,c]}class nn extends fe{constructor(e){super(),ce(this,e,Kl,Gl,ae,{})}}export{nn as C};
